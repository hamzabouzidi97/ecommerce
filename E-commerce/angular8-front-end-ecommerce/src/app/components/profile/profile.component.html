<div class="container mt-5">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-sm-6">
          <p class="text-center text-danger" *ngIf="isError">{{message}}</p>
          <div class="card">
            <div class="card-header">
              <span *ngIf="!changeInformations"> Personnel informations </span>
              <span *ngIf="changeInformations"> Edit personnel informations </span>
              <span class="float-right edit" *ngIf="!changeInformations" (click)="changePersonelInformations()">
                <i class="fas fa-edit text-success"></i>
              </span>
              <span class="float-right edit" *ngIf="changeInformations" (click)="closePersonelInformations()">
                <i class="fas fa-times text-dark"></i>
              </span>
            </div>
            <form [formGroup]="profilForm" (ngSubmit)="onSubmit()">
              <div class="card-body">
                <div class="form-row" *ngIf="!changeInformations">
                  <div class="form-group col-md-6">
                    <label class="card-text">{{user.nom}}</label>
                  </div>
                  <div class="form-group col-md-6">
                    <label class="card-text">{{user.prenom}}</label>
                  </div>
                  <div class="form-group">
                    <label class="card-text">{{user.email}}</label>
                  </div>
                </div>

                <div class="form-row" *ngIf="changeInformations">
                  <div class="form-group col-md-6">
                    <label>First name</label>
                    <input type="text" class="form-control" [(ngModel)]="user.nom" formControlName="nom"
                      placeholder="First name">
                    <small class="form-text" *ngIf="profilForm.get('nom').errors?.required">
                      <p class="text-danger">First name required.</p>
                    </small>
                  </div>
                  <div class="form-group col-md-6">
                    <label>Last name</label>
                    <input type="text" class="form-control" [(ngModel)]="user.prenom" formControlName="prenom"
                      placeholder="Last name">
                    <small class="form-text" *ngIf="profilForm.get('prenom').errors?.required">
                      <p class="text-danger">Last name required.</p>
                    </small>
                  </div>
                </div>
                <div class="form-group" *ngIf="changeInformations">
                  <label>Email</label>
                  <input type="email" class="form-control" [(ngModel)]="user.email" formControlName="email"
                    placeholder="Email">
                  <small class="form-text" *ngIf="profilForm.get('email').errors?.required">
                    <p class="text-danger">E-mail required.</p>
                  </small>
                  <small class="form-text" *ngIf="profilForm.get('email').errors?.email">
                    <p class="text-danger">E-mail not valid.</p>
                  </small>
                  <button class="btn btn-success mt-2" [disabled]="!profilForm.valid">
                    <div class="spinner-border text-left spinner-border-sm mr-2" role="status" *ngIf="isLoading">
                      <span class="sr-only">Loading...</span>
                    </div>
                    Update
                  </button>
                </div>
              </div>

            </form>
          </div>
        </div>
        <div class="col-sm-6">
          <div class="card">
            <div class="card-header">
              <span> Change password </span>
            </div>
            <div class="card-body">
              <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
                <div class="form-group">
                  <label>Last password : </label>
                  <input type="password" class="form-control" formControlName="lastPassword">
                  <div
                    *ngIf="passwordForm.get('lastPassword').errors && (passwordForm.get('lastPassword').dirty || passwordForm.get('lastPassword').touched)">

                    <span class="text-danger" *ngIf="passwordForm.get('lastPassword').errors.required">Last password
                      required</span>
                    <span class="text-danger" *ngIf="passwordForm.get('lastPassword').errors.minlength">Password must be
                      greater than 6 charchter</span>
                  </div>
                </div>
                <div class="form-group">
                  <label>New password : </label>
                  <input type="password" class="form-control" formControlName="newPassword">
                  <div *ngIf="passwordForm.get('newPassword').errors && (passwordForm.get('newPassword').dirty || passwordForm.get('newPassword').touched)">
                  
                  <span class="text-danger" *ngIf="passwordForm.get('newPassword').errors.required">New password
                    required</span>
                  <span class="text-danger" *ngIf="passwordForm.get('newPassword').errors.minlength">Password must be
                    greater than 6 charchter</span>
                </div>
            </div>
            <div class="form-group">
              <label>Confirm password : </label>
              <input type="password" class="form-control" formControlName="confirmPassword">
              <div
                *ngIf="passwordForm.get('confirmPassword').errors && (passwordForm.get('confirmPassword').dirty || passwordForm.get('confirmPassword').touched)">
                <span class="text-danger" *ngIf="passwordForm.get('confirmPassword').errors.required">Confirm password
                  required</span>
                <span class="text-danger" *ngIf="passwordForm.get('confirmPassword').errors.minlength">Password must
                  be greater than 6 charchter</span>
              </div>
            </div>
            <button class="btn btn-success" [disabled]="!passwordForm.valid">
              <div class="spinner-border text-left spinner-border-sm mr-2" role="status" *ngIf="isLoadingPassword">
                <span class="sr-only">Loading...</span>
              </div>
              Update password
            </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>